---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection, render } from 'astro:content';

// Generate a route for every markdown file found
export async function getStaticPaths() {
  const plans = await getCollection('plans');
  return plans.map(plan => ({
    params: { id: plan.id },
    props: { plan },
  }));
}

// Render the content
const { plan } = Astro.props;
const { Content } = await render(plan);
---

<BaseLayout title={plan.id}>
  <a href="/" class="text-blue-600 hover:underline mb-8 block">&larr; Back to Index</a>

  <article class="prose prose-slate lg:prose-xl max-w-none prose-headings:font-semibold prose-a:text-blue-600">
    <Content />
  </article>
</BaseLayout>
